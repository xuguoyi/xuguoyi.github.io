# CSRF
## 什么是CSRF
跨站请求伪造 Cross Site Request Forgery 。利用用户已登录的身份，在用户不知情的情况下，以用户的名义完成非法操作。

## 原理
- 在第三方网站向本网站发起请求
  1. 登录受信任网站A, 并在本地生成cookie
  2. 在不登出的情况下，访问危险网站B
  3. B要求访问A，发出一个请求，这个请求会带上本地的cookie
  4. 用户并不知道这个请求是B发出的，但浏览器会自动带上要访问的网站的cookie

## 防范手段
### 禁止第三方网站带cookie
比如设置same-site，有两个值: 
1. Strict(所有第三方请求都不能携带本网站的cookie)
2. Lax(链接可以, 但form表单提交和ajax请求不行)

### 前端页面使用验证码
最有效确认是否是用户自身行为

### token验证
因为token是加在头部的，而csrf伪造请求只会带上cookie

### referer验证
判断页面的来源是否来自本站，禁止来自第三方的请求